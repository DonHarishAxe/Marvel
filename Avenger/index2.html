<html>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://ciphertrick.com/demo/jquerysession/js/jquerysession.js"></script>
</head>

<body>  

<button id="b1">GetAllEmployees</button><br>
Get by id <input type="text" id="getById">
<button id="b2">Search by Id</button><br>
Delete by id <input type="text" id="deleteById">
<button id="b3">Delete by Id</button><br>
Create<br>
Id <input type="text" id="id">
Name <input type="text" id="name">
Address <input type="text" id="address">
<button id="b4">Create</button><br>

Update<br>
Id <input type="text" id="id1">
Name <input type="text" id="name1">
Address <input type="text" id="address1">
<button id="b5">Update</button><br>

<script type="text/javascript">
$(document).ready(function(){
    


    $('#b1').click(function(){ 
	fetch('http://localhost:9000/employees', {credentials: 'include', mode: 'cors'}).then(r => r.json()).then(console.log)
	window.location = '/index3.html';
    });

    $('#b2').click(function(){ 
	fetch(`http://localhost:9000/employees/${$("#getById").val()}`, {credentials: 'include', mode: 'cors'}).then(r => r.text()).then(console.log)
/*	var prefix="http://localhost:9000/employees/";
	value = $("#getById").val(); 
        prefix=prefix.concat(value);
	//alert(prefix);  	 	
	$.get(prefix,
        function(data) {
            alert(JSON.stringify(data));         
          });   */
    });

    $('#b3').click(function(){ 
	var prefix="http://localhost:9000/employees/";
	value = $("#deleteById").val(); 
        prefix=prefix.concat(value);
	        
	$.ajax({ 
             type: "DELETE",
             dataType: "json",
             url: prefix,
             success: function(data){        
                //alert("Deleted");
             }
         });
    });
    
    $('#b4').click(function(){ 
	var prefix="http://localhost:9000/employees/";
	id = $("#id").val(); 
        name = $("#name").val(); 
        address = $("#address").val();         
	var myObject = new Object();
	myObject.name = name;
	myObject.address = address;
	myObject.id = id;
	var finalobj = JSON.stringify(myObject);
        alert(finalobj);
	$.ajax({ 
             type: "POST",
             dataType: "json",
	     contentType: "application/json",
	     data: finalobj,
             url: prefix,
             success: function(data){        
                //alert("Deleted");
             }
         });
    });
    
    $('#b5').click(function(){ 
	var prefix="http://localhost:9000/employees/";
	id = $("#id1").val(); 
        name = $("#name1").val(); 
        address = $("#address1").val();
	prefix=prefix.concat(id);
	         
	var myObject = new Object();
	myObject.name = name;
	myObject.address = address;
	myObject.id = id;
	var finalobj = JSON.stringify(myObject);
        alert(prefix);
	$.ajax({ 
             type: "PUT",
             dataType: "json",
	     contentType: "application/json",
	     data: finalobj,
             url: prefix,
             success: function(data){        
                //alert("Deleted");
             }
         });
    });
    
    /*
    $("#b4").click(function(){
        $.post("http://localhost:9000/employees/",
        {
	  id: "10",
          name: "Donald Duck",
          address: "Duckburg"
        },
        function(data,status){
            alert("Data: " + data + "\nStatus: " + status);
        });
    });
    */

});


</script>



</body>
 
</html>

